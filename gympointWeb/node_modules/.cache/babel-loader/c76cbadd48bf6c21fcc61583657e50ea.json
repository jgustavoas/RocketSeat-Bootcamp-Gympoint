{"ast":null,"code":"import _slicedToArray from \"/home/gustavo/Rocketseat/Bootcamp/Gympoint/gympointWeb/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/slicedToArray\";\nvar _jsxFileName = \"/home/gustavo/Rocketseat/Bootcamp/Gympoint/gympointWeb/src/pages/Plans/form.js\";\nimport React, { useState, useEffect } from 'react';\nimport { useDispatch } from 'react-redux';\nimport { MdArrowBack, MdCheck } from 'react-icons/md';\nimport api from \"../../services/api\";\nimport { newPlanRequest, updatePlanRequest } from \"../../store/modules/plan/actions\";\nimport { request } from \"../../store/modules/data/actions\";\nimport history from \"../../services/history\";\nexport default function PlansForm() {\n  const dispatch = useDispatch();\n\n  const _useState = useState([]),\n        _useState2 = _slicedToArray(_useState, 2),\n        plan = _useState2[0],\n        setPlan = _useState2[1];\n\n  const id = plan.id,\n        title = plan.title,\n        duration = plan.duration,\n        price = plan.price;\n  const params = new URL(document.location).searchParams;\n  const planId = params.get('id') ? params.get('id') : '';\n  const totalPrice = !duration || !price ? 0 : duration * price;\n  useEffect(() => {\n    async function planData() {\n      const response = await api.get(`plans/${planId}`);\n      setPlan(response.data);\n    }\n\n    if (planId !== '') {\n      planData();\n    }\n  }, [planId]);\n  /* function handleSubmit(planFormData) {\n    const { title, duration, price } = planFormData;\n    const action = planId\n      ? updatePlanRequest(planFormData)\n      : newPlanRequest({ title, duration, price });\n    dispatch(action);\n  } */\n\n  /* function handleSubmit(formData) {\n    const { title, duration, price } = formData;\n    const action = planId\n      ? request('UPDATE', 'plans', {\n          id: planId,\n          rest: { title, duration, price },\n        })\n      : request('CREATE', 'plans', { title, duration, price });\n    dispatch(action);\n  } */\n\n  function handleSubmit(page, id, formData) {\n    const action = id ? request('UPDATE', page, {\n      id,\n      rest: formData\n    }) : request('CREATE', page, formData);\n    dispatch(action);\n  }\n\n  function goTo(page) {\n    history.push(`/${page}`);\n  }\n\n  return React.createElement(React.Fragment, null, React.createElement(\"header\", {\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 72\n    },\n    __self: this\n  }, React.createElement(\"h1\", {\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 73\n    },\n    __self: this\n  }, \"Cadastro de plano\"), React.createElement(\"aside\", {\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 74\n    },\n    __self: this\n  }, React.createElement(\"button\", {\n    type: \"button\",\n    className: \"greyButton\",\n    onClick: () => goTo('plans'),\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 75\n    },\n    __self: this\n  }, React.createElement(MdArrowBack, {\n    size: 16,\n    color: \"#ee4d64\",\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 80\n    },\n    __self: this\n  }), \" VOLTAR\"), React.createElement(\"button\", {\n    type: \"button\",\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 82\n    },\n    __self: this\n  }, React.createElement(MdCheck, {\n    onClick: () => handleSubmit('plans', planId, {\n      title,\n      duration,\n      price\n    }),\n    size: 16,\n    color: \"#fff\",\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 83\n    },\n    __self: this\n  }), ' ', \"SALVAR\"))), React.createElement(\"div\", {\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 94\n    },\n    __self: this\n  }, React.createElement(\"form\", {\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 95\n    },\n    __self: this\n  }, React.createElement(\"label\", {\n    htmlFor: \"name\",\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 96\n    },\n    __self: this\n  }, \"NOME DO PLANO\"), React.createElement(\"input\", {\n    onChange: event => setPlan({\n      id,\n      title: event.target.value,\n      duration,\n      price\n    }),\n    value: title,\n    type: \"text\",\n    name: \"title\",\n    id: \"title\",\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 97\n    },\n    __self: this\n  }), React.createElement(\"div\", {\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 111\n    },\n    __self: this\n  }, React.createElement(\"div\", {\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 112\n    },\n    __self: this\n  }, React.createElement(\"label\", {\n    htmlFor: \"name\",\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 113\n    },\n    __self: this\n  }, \"MESES DE DURA\\xC7\\xC3O\"), React.createElement(\"input\", {\n    onChange: event => setPlan({\n      id,\n      title,\n      duration: event.target.value,\n      price\n    }),\n    value: duration,\n    type: \"text\",\n    name: \"duration\",\n    id: \"duration\",\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 114\n    },\n    __self: this\n  })), React.createElement(\"div\", {\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 129\n    },\n    __self: this\n  }, React.createElement(\"label\", {\n    htmlFor: \"name\",\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 130\n    },\n    __self: this\n  }, \"PRE\\xC7O MENSAL (R$)\"), React.createElement(\"input\", {\n    onChange: event => setPlan({\n      id,\n      title,\n      duration,\n      price: event.target.value\n    }),\n    value: price,\n    type: \"text\",\n    name: \"price\",\n    id: \"price\",\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 131\n    },\n    __self: this\n  })), React.createElement(\"div\", {\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 146\n    },\n    __self: this\n  }, React.createElement(\"label\", {\n    htmlFor: \"name\",\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 147\n    },\n    __self: this\n  }, \"PRE\\xC7O TOTAL (R$)\"), React.createElement(\"input\", {\n    disabled: \"disabled\",\n    value: totalPrice,\n    type: \"text\",\n    name: \"totalPrice\",\n    id: \"totalPrice\",\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 148\n    },\n    __self: this\n  }))))));\n}","map":{"version":3,"sources":["/home/gustavo/Rocketseat/Bootcamp/Gympoint/gympointWeb/src/pages/Plans/form.js"],"names":["React","useState","useEffect","useDispatch","MdArrowBack","MdCheck","api","newPlanRequest","updatePlanRequest","request","history","PlansForm","dispatch","plan","setPlan","id","title","duration","price","params","URL","document","location","searchParams","planId","get","totalPrice","planData","response","data","handleSubmit","page","formData","action","rest","goTo","push","event","target","value"],"mappings":"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","sourcesContent":["import React, { useState, useEffect } from 'react';\nimport { useDispatch } from 'react-redux';\nimport { MdArrowBack, MdCheck } from 'react-icons/md';\nimport api from '~/services/api';\n\nimport {\n  newPlanRequest,\n  updatePlanRequest,\n} from '~/store/modules/plan/actions';\nimport { request } from '~/store/modules/data/actions';\n\nimport history from '~/services/history';\n\nexport default function PlansForm() {\n  const dispatch = useDispatch();\n\n  const [plan, setPlan] = useState([]);\n  const { id, title, duration, price } = plan;\n\n  const params = new URL(document.location).searchParams;\n  const planId = params.get('id') ? params.get('id') : '';\n\n  const totalPrice = !duration || !price ? 0 : duration * price;\n\n  useEffect(() => {\n    async function planData() {\n      const response = await api.get(`plans/${planId}`);\n\n      setPlan(response.data);\n    }\n\n    if (planId !== '') {\n      planData();\n    }\n  }, [planId]);\n\n  /* function handleSubmit(planFormData) {\n    const { title, duration, price } = planFormData;\n    const action = planId\n      ? updatePlanRequest(planFormData)\n      : newPlanRequest({ title, duration, price });\n    dispatch(action);\n  } */\n\n  /* function handleSubmit(formData) {\n    const { title, duration, price } = formData;\n    const action = planId\n      ? request('UPDATE', 'plans', {\n          id: planId,\n          rest: { title, duration, price },\n        })\n      : request('CREATE', 'plans', { title, duration, price });\n    dispatch(action);\n  } */\n\n  function handleSubmit(page, id, formData) {\n    const action = id\n      ? request('UPDATE', page, {\n          id,\n          rest: formData,\n        })\n      : request('CREATE', page, formData);\n    dispatch(action);\n  }\n\n  function goTo(page) {\n    history.push(`/${page}`);\n  }\n\n  return (\n    <>\n      <header>\n        <h1>Cadastro de plano</h1>\n        <aside>\n          <button\n            type='button'\n            className='greyButton'\n            onClick={() => goTo('plans')}\n          >\n            <MdArrowBack size={16} color='#ee4d64' /> VOLTAR\n          </button>\n          <button type='button'>\n            <MdCheck\n              onClick={() =>\n                handleSubmit('plans', planId, { title, duration, price })\n              }\n              size={16}\n              color='#fff'\n            />{' '}\n            SALVAR\n          </button>\n        </aside>\n      </header>\n      <div>\n        <form>\n          <label htmlFor='name'>NOME DO PLANO</label>\n          <input\n            onChange={event =>\n              setPlan({\n                id,\n                title: event.target.value,\n                duration,\n                price,\n              })\n            }\n            value={title}\n            type='text'\n            name='title'\n            id='title'\n          />\n          <div>\n            <div>\n              <label htmlFor='name'>MESES DE DURAÇÃO</label>\n              <input\n                onChange={event =>\n                  setPlan({\n                    id,\n                    title,\n                    duration: event.target.value,\n                    price,\n                  })\n                }\n                value={duration}\n                type='text'\n                name='duration'\n                id='duration'\n              />\n            </div>\n            <div>\n              <label htmlFor='name'>PREÇO MENSAL (R$)</label>\n              <input\n                onChange={event =>\n                  setPlan({\n                    id,\n                    title,\n                    duration,\n                    price: event.target.value,\n                  })\n                }\n                value={price}\n                type='text'\n                name='price'\n                id='price'\n              />\n            </div>\n            <div>\n              <label htmlFor='name'>PREÇO TOTAL (R$)</label>\n              <input\n                disabled='disabled'\n                value={totalPrice}\n                type='text'\n                name='totalPrice'\n                id='totalPrice'\n              />\n            </div>\n          </div>\n        </form>\n      </div>\n    </>\n  );\n}\n"]},"metadata":{},"sourceType":"module"}