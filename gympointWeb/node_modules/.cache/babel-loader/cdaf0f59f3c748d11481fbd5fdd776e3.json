{"ast":null,"code":"import _objectSpread from \"/home/gustavo/Rocketseat/Bootcamp/Desafios/gympointWeb/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/objectSpread2\";\nimport _slicedToArray from \"/home/gustavo/Rocketseat/Bootcamp/Desafios/gympointWeb/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/slicedToArray\";\nvar _jsxFileName = \"/home/gustavo/Rocketseat/Bootcamp/Desafios/gympointWeb/src/pages/Matriculations/form.js\";\nimport React, { useState, useMemo, useEffect } from 'react';\nimport { useDispatch } from 'react-redux';\nimport { format, parseISO } from 'date-fns';\nimport { utcToZonedTime } from 'date-fns-tz';\nimport pt from 'date-fns/locale/pt';\nimport { MdArrowBack, MdCheck } from 'react-icons/md';\nimport api from \"../../services/api\";\nimport { request } from \"../../store/modules/data/actions\";\nimport history from \"../../services/history\";\nexport default function Dashboard() {\n  const dispatch = useDispatch();\n\n  const _useState = useState([]),\n        _useState2 = _slicedToArray(_useState, 2),\n        matriculation = _useState2[0],\n        setMatriculation = _useState2[1];\n\n  console.tron.log(matriculation);\n  const params = new URL(document.location).searchParams;\n  const matriculationId = params.get('id') ? params.get('id') : '';\n\n  async function loadMatriculations() {\n    const response = await api.get(`matriculations/${matriculationId}`);\n    const arr = [response.data];\n    const matriculationsData = arr.map(data => _objectSpread({}, data, {\n      start_dateFormated: format(parseISO(data.start_date), 'dd MMM yyyy', {\n        locale: pt\n      }),\n      end_dateFormated: format(parseISO(data.end_date), 'dd MMM yyyy', {\n        locale: pt\n      })\n    }));\n    setMatriculation(matriculationsData);\n  }\n\n  useEffect(() => {\n    loadMatriculations();\n  });\n\n  function handleSubmit(formData) {\n    const plan_id = formData.plan_id,\n          start_date = formData.start_date,\n          end_date = formData.end_date;\n    const action = matriculationId ? request('UPDATE', 'matriculations', formData) : request('CREATE', 'matriculations', {\n      plan_id,\n      start_date,\n      end_date\n    });\n    dispatch(action);\n  }\n\n  function goTo(page) {\n    history.push(`/${page}`);\n  }\n\n  return React.createElement(React.Fragment, null, React.createElement(\"header\", {\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 55\n    },\n    __self: this\n  }, React.createElement(\"h1\", {\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 56\n    },\n    __self: this\n  }, \"Cadastro de matr\\xEDcula\"), React.createElement(\"aside\", {\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 57\n    },\n    __self: this\n  }, React.createElement(\"button\", {\n    type: \"button\",\n    className: \"greyButton\",\n    onClick: () => goTo('matriculations'),\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 58\n    },\n    __self: this\n  }, React.createElement(MdArrowBack, {\n    size: 16,\n    color: \"#ee4d64\",\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 63\n    },\n    __self: this\n  }), \" VOLTAR\"), React.createElement(\"button\", {\n    type: \"button\",\n    onClick: () => handleSubmit(matriculation),\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 65\n    },\n    __self: this\n  }, React.createElement(MdCheck, {\n    size: 16,\n    color: \"#fff\",\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 66\n    },\n    __self: this\n  }), \" SALVAR\"))), React.createElement(\"div\", {\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 70\n    },\n    __self: this\n  }, React.createElement(\"form\", {\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 71\n    },\n    __self: this\n  }, React.createElement(\"label\", {\n    htmlFor: \"name\",\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 72\n    },\n    __self: this\n  }, \"NOME DO ALUNO\"), React.createElement(\"input\", {\n    type: \"text\",\n    name: \"name\",\n    id: \"name\",\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 73\n    },\n    __self: this\n  }), React.createElement(\"div\", {\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 74\n    },\n    __self: this\n  }, React.createElement(\"div\", {\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 75\n    },\n    __self: this\n  }, React.createElement(\"label\", {\n    htmlFor: \"name\",\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 76\n    },\n    __self: this\n  }, \"PLANO\"), React.createElement(\"input\", {\n    type: \"text\",\n    name: \"\",\n    id: \"\",\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 77\n    },\n    __self: this\n  })), React.createElement(\"div\", {\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 79\n    },\n    __self: this\n  }, React.createElement(\"label\", {\n    htmlFor: \"name\",\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 80\n    },\n    __self: this\n  }, \"DATA DE IN\\xCDCIO\"), React.createElement(\"input\", {\n    type: \"text\",\n    name: \"\",\n    id: \"\",\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 81\n    },\n    __self: this\n  })), React.createElement(\"div\", {\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 83\n    },\n    __self: this\n  }, React.createElement(\"label\", {\n    htmlFor: \"name\",\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 84\n    },\n    __self: this\n  }, \"DATA DE T\\xC9RMINO\"), React.createElement(\"input\", {\n    type: \"text\",\n    disabled: \"disabled\",\n    name: \"\",\n    id: \"\",\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 85\n    },\n    __self: this\n  })), React.createElement(\"div\", {\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 87\n    },\n    __self: this\n  }, React.createElement(\"label\", {\n    htmlFor: \"name\",\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 88\n    },\n    __self: this\n  }, \"VALOR TOTAL\"), React.createElement(\"input\", {\n    disabled: \"disabled\",\n    value: \"R$ 0,00\",\n    type: \"text\",\n    name: \"\",\n    id: \"\",\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 89\n    },\n    __self: this\n  }))))));\n}","map":{"version":3,"sources":["/home/gustavo/Rocketseat/Bootcamp/Desafios/gympointWeb/src/pages/Matriculations/form.js"],"names":["React","useState","useMemo","useEffect","useDispatch","format","parseISO","utcToZonedTime","pt","MdArrowBack","MdCheck","api","request","history","Dashboard","dispatch","matriculation","setMatriculation","console","tron","log","params","URL","document","location","searchParams","matriculationId","get","loadMatriculations","response","arr","data","matriculationsData","map","start_dateFormated","start_date","locale","end_dateFormated","end_date","handleSubmit","formData","plan_id","action","goTo","page","push"],"mappings":";;;AAAA,OAAOA,KAAP,IAAgBC,QAAhB,EAA0BC,OAA1B,EAAmCC,SAAnC,QAAoD,OAApD;AACA,SAASC,WAAT,QAA4B,aAA5B;AACA,SAASC,MAAT,EAAiBC,QAAjB,QAAiC,UAAjC;AACA,SAASC,cAAT,QAA+B,aAA/B;AACA,OAAOC,EAAP,MAAe,oBAAf;AACA,SAASC,WAAT,EAAsBC,OAAtB,QAAqC,gBAArC;AACA,OAAOC,GAAP,MAAgB,oBAAhB;AAEA,SAASC,OAAT,QAAwB,kCAAxB;AAEA,OAAOC,OAAP,MAAoB,wBAApB;AAEA,eAAe,SAASC,SAAT,GAAqB;AAClC,QAAMC,QAAQ,GAAGX,WAAW,EAA5B;;AADkC,oBAEQH,QAAQ,CAAC,EAAD,CAFhB;AAAA;AAAA,QAE3Be,aAF2B;AAAA,QAEZC,gBAFY;;AAGlCC,EAAAA,OAAO,CAACC,IAAR,CAAaC,GAAb,CAAiBJ,aAAjB;AAEA,QAAMK,MAAM,GAAG,IAAIC,GAAJ,CAAQC,QAAQ,CAACC,QAAjB,EAA2BC,YAA1C;AACA,QAAMC,eAAe,GAAGL,MAAM,CAACM,GAAP,CAAW,IAAX,IAAmBN,MAAM,CAACM,GAAP,CAAW,IAAX,CAAnB,GAAsC,EAA9D;;AAEA,iBAAeC,kBAAf,GAAoC;AAClC,UAAMC,QAAQ,GAAG,MAAMlB,GAAG,CAACgB,GAAJ,CAAS,kBAAiBD,eAAgB,EAA1C,CAAvB;AACA,UAAMI,GAAG,GAAG,CAACD,QAAQ,CAACE,IAAV,CAAZ;AACA,UAAMC,kBAAkB,GAAGF,GAAG,CAACG,GAAJ,CAAQF,IAAI,sBAClCA,IADkC;AAErCG,MAAAA,kBAAkB,EAAE7B,MAAM,CAACC,QAAQ,CAACyB,IAAI,CAACI,UAAN,CAAT,EAA4B,aAA5B,EAA2C;AACnEC,QAAAA,MAAM,EAAE5B;AAD2D,OAA3C,CAFW;AAKrC6B,MAAAA,gBAAgB,EAAEhC,MAAM,CAACC,QAAQ,CAACyB,IAAI,CAACO,QAAN,CAAT,EAA0B,aAA1B,EAAyC;AAC/DF,QAAAA,MAAM,EAAE5B;AADuD,OAAzC;AALa,MAAZ,CAA3B;AAUAS,IAAAA,gBAAgB,CAACe,kBAAD,CAAhB;AACD;;AAED7B,EAAAA,SAAS,CAAC,MAAM;AACdyB,IAAAA,kBAAkB;AACnB,GAFQ,CAAT;;AAIA,WAASW,YAAT,CAAsBC,QAAtB,EAAgC;AAAA,UACtBC,OADsB,GACYD,QADZ,CACtBC,OADsB;AAAA,UACbN,UADa,GACYK,QADZ,CACbL,UADa;AAAA,UACDG,QADC,GACYE,QADZ,CACDF,QADC;AAE9B,UAAMI,MAAM,GAAGhB,eAAe,GAC1Bd,OAAO,CAAC,QAAD,EAAW,gBAAX,EAA6B4B,QAA7B,CADmB,GAE1B5B,OAAO,CAAC,QAAD,EAAW,gBAAX,EAA6B;AAAE6B,MAAAA,OAAF;AAAWN,MAAAA,UAAX;AAAuBG,MAAAA;AAAvB,KAA7B,CAFX;AAGAvB,IAAAA,QAAQ,CAAC2B,MAAD,CAAR;AACD;;AAED,WAASC,IAAT,CAAcC,IAAd,EAAoB;AAClB/B,IAAAA,OAAO,CAACgC,IAAR,CAAc,IAAGD,IAAK,EAAtB;AACD;;AAED,SACE,0CACE;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,KACE;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,gCADF,EAEE;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,KACE;AACE,IAAA,IAAI,EAAC,QADP;AAEE,IAAA,SAAS,EAAC,YAFZ;AAGE,IAAA,OAAO,EAAE,MAAMD,IAAI,CAAC,gBAAD,CAHrB;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,KAKE,oBAAC,WAAD;AAAa,IAAA,IAAI,EAAE,EAAnB;AAAuB,IAAA,KAAK,EAAC,SAA7B;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,IALF,YADF,EAQE;AAAQ,IAAA,IAAI,EAAC,QAAb;AAAsB,IAAA,OAAO,EAAE,MAAMJ,YAAY,CAACvB,aAAD,CAAjD;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,KACE,oBAAC,OAAD;AAAS,IAAA,IAAI,EAAE,EAAf;AAAmB,IAAA,KAAK,EAAC,MAAzB;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,IADF,YARF,CAFF,CADF,EAgBE;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,KACE;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,KACE;AAAO,IAAA,OAAO,EAAC,MAAf;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,qBADF,EAEE;AAAO,IAAA,IAAI,EAAC,MAAZ;AAAmB,IAAA,IAAI,EAAC,MAAxB;AAA+B,IAAA,EAAE,EAAC,MAAlC;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,IAFF,EAGE;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,KACE;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,KACE;AAAO,IAAA,OAAO,EAAC,MAAf;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,aADF,EAEE;AAAO,IAAA,IAAI,EAAC,MAAZ;AAAmB,IAAA,IAAI,EAAC,EAAxB;AAA2B,IAAA,EAAE,EAAC,EAA9B;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,IAFF,CADF,EAKE;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,KACE;AAAO,IAAA,OAAO,EAAC,MAAf;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,yBADF,EAEE;AAAO,IAAA,IAAI,EAAC,MAAZ;AAAmB,IAAA,IAAI,EAAC,EAAxB;AAA2B,IAAA,EAAE,EAAC,EAA9B;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,IAFF,CALF,EASE;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,KACE;AAAO,IAAA,OAAO,EAAC,MAAf;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,0BADF,EAEE;AAAO,IAAA,IAAI,EAAC,MAAZ;AAAmB,IAAA,QAAQ,EAAC,UAA5B;AAAuC,IAAA,IAAI,EAAC,EAA5C;AAA+C,IAAA,EAAE,EAAC,EAAlD;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,IAFF,CATF,EAaE;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,KACE;AAAO,IAAA,OAAO,EAAC,MAAf;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,mBADF,EAEE;AACE,IAAA,QAAQ,EAAC,UADX;AAEE,IAAA,KAAK,EAAC,SAFR;AAGE,IAAA,IAAI,EAAC,MAHP;AAIE,IAAA,IAAI,EAAC,EAJP;AAKE,IAAA,EAAE,EAAC,EALL;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,IAFF,CAbF,CAHF,CADF,CAhBF,CADF;AAiDD","sourcesContent":["import React, { useState, useMemo, useEffect } from 'react';\nimport { useDispatch } from 'react-redux';\nimport { format, parseISO } from 'date-fns';\nimport { utcToZonedTime } from 'date-fns-tz';\nimport pt from 'date-fns/locale/pt';\nimport { MdArrowBack, MdCheck } from 'react-icons/md';\nimport api from '~/services/api';\n\nimport { request } from '~/store/modules/data/actions';\n\nimport history from '~/services/history';\n\nexport default function Dashboard() {\n  const dispatch = useDispatch();\n  const [matriculation, setMatriculation] = useState([]);\n  console.tron.log(matriculation);\n\n  const params = new URL(document.location).searchParams;\n  const matriculationId = params.get('id') ? params.get('id') : '';\n\n  async function loadMatriculations() {\n    const response = await api.get(`matriculations/${matriculationId}`);\n    const arr = [response.data];\n    const matriculationsData = arr.map(data => ({\n      ...data,\n      start_dateFormated: format(parseISO(data.start_date), 'dd MMM yyyy', {\n        locale: pt,\n      }),\n      end_dateFormated: format(parseISO(data.end_date), 'dd MMM yyyy', {\n        locale: pt,\n      }),\n    }));\n\n    setMatriculation(matriculationsData);\n  }\n\n  useEffect(() => {\n    loadMatriculations();\n  });\n\n  function handleSubmit(formData) {\n    const { plan_id, start_date, end_date } = formData;\n    const action = matriculationId\n      ? request('UPDATE', 'matriculations', formData)\n      : request('CREATE', 'matriculations', { plan_id, start_date, end_date });\n    dispatch(action);\n  }\n\n  function goTo(page) {\n    history.push(`/${page}`);\n  }\n\n  return (\n    <>\n      <header>\n        <h1>Cadastro de matrícula</h1>\n        <aside>\n          <button\n            type='button'\n            className='greyButton'\n            onClick={() => goTo('matriculations')}\n          >\n            <MdArrowBack size={16} color='#ee4d64' /> VOLTAR\n          </button>\n          <button type='button' onClick={() => handleSubmit(matriculation)}>\n            <MdCheck size={16} color='#fff' /> SALVAR\n          </button>\n        </aside>\n      </header>\n      <div>\n        <form>\n          <label htmlFor='name'>NOME DO ALUNO</label>\n          <input type='text' name='name' id='name' />\n          <div>\n            <div>\n              <label htmlFor='name'>PLANO</label>\n              <input type='text' name='' id='' />\n            </div>\n            <div>\n              <label htmlFor='name'>DATA DE INÍCIO</label>\n              <input type='text' name='' id='' />\n            </div>\n            <div>\n              <label htmlFor='name'>DATA DE TÉRMINO</label>\n              <input type='text' disabled='disabled' name='' id='' />\n            </div>\n            <div>\n              <label htmlFor='name'>VALOR TOTAL</label>\n              <input\n                disabled='disabled'\n                value='R$ 0,00'\n                type='text'\n                name=''\n                id=''\n              />\n            </div>\n          </div>\n        </form>\n      </div>\n    </>\n  );\n}\n"]},"metadata":{},"sourceType":"module"}