{"ast":null,"code":"import { takeLatest, call, put, all } from 'redux-saga/effects';\nimport { toast } from 'react-toastify';\nimport api from \"../../../services/api\"; // import { request } from './actions';\n\nexport function* toCreate({\n  payload\n}) {\n  console.tron.log(payload.data, typeof payload.data.student_id, typeof payload.data.plan_id, typeof payload.data.start_date);\n\n  try {\n    const _payload$data = payload.data,\n          page = _payload$data.page,\n          rest = _payload$data.rest;\n    console.tron.log(rest);\n    yield call(api.post, page, {\n      rest\n    });\n    toast.success('Aluno matriculado com sucesso!');\n  } catch (err) {\n    toast.error('Erro ao inserir dados!'); // yield put(failure(payload.page, 'CREATE', payload.data));\n  }\n}\nexport function* toUpdate({\n  payload\n}) {\n  try {\n    const page = payload.page,\n          data = payload.data;\n    const id = data.id,\n          rest = data.rest;\n    yield call(api.put, `/${page}/${id}`, rest);\n    toast.success('Matrícula atualizada com sucesso!');\n  } catch (err) {\n    toast.error('Erro ao editar matrcícula!');\n    console.tron.log(payload); // yield put(failure(payload.page, 'UPDATE', payload.data));\n  }\n}\nexport function* toDelete({\n  payload\n}) {\n  console.tron.log(payload);\n\n  try {\n    const page = payload.page,\n          data = payload.data;\n    yield call(api.delete, page, {\n      data: {\n        id: String(data)\n      }\n    });\n    toast.success('Matrícula deletada com sucesso!');\n  } catch (err) {\n    toast.error('Erro ao deletar matrícula!');\n  }\n}\nexport default all([takeLatest('CREATE', toCreate), takeLatest('UPDATE', toUpdate), takeLatest('DELETE', toDelete)]);","map":{"version":3,"sources":["/home/gustavo/Rocketseat/Bootcamp/Gympoint/gympointWeb/src/store/modules/data/sagas.js"],"names":["takeLatest","call","put","all","toast","api","toCreate","payload","console","tron","log","data","student_id","plan_id","start_date","page","rest","post","success","err","error","toUpdate","id","toDelete","delete","String"],"mappings":"AAAA,SAASA,UAAT,EAAqBC,IAArB,EAA2BC,GAA3B,EAAgCC,GAAhC,QAA2C,oBAA3C;AACA,SAASC,KAAT,QAAsB,gBAAtB;AACA,OAAOC,GAAP,MAAgB,uBAAhB,C,CAEA;;AAEA,OAAO,UAAUC,QAAV,CAAmB;AAAEC,EAAAA;AAAF,CAAnB,EAAgC;AACrCC,EAAAA,OAAO,CAACC,IAAR,CAAaC,GAAb,CACEH,OAAO,CAACI,IADV,EAEE,OAAOJ,OAAO,CAACI,IAAR,CAAaC,UAFtB,EAGE,OAAOL,OAAO,CAACI,IAAR,CAAaE,OAHtB,EAIE,OAAON,OAAO,CAACI,IAAR,CAAaG,UAJtB;;AAMA,MAAI;AAAA,0BACqBP,OAAO,CAACI,IAD7B;AAAA,UACMI,IADN,iBACMA,IADN;AAAA,UACYC,IADZ,iBACYA,IADZ;AAEFR,IAAAA,OAAO,CAACC,IAAR,CAAaC,GAAb,CAAiBM,IAAjB;AACA,UAAMf,IAAI,CAACI,GAAG,CAACY,IAAL,EAAWF,IAAX,EAAiB;AAAEC,MAAAA;AAAF,KAAjB,CAAV;AAEAZ,IAAAA,KAAK,CAACc,OAAN,CAAc,gCAAd;AACD,GAND,CAME,OAAOC,GAAP,EAAY;AACZf,IAAAA,KAAK,CAACgB,KAAN,CAAY,wBAAZ,EADY,CAEZ;AACD;AACF;AAED,OAAO,UAAUC,QAAV,CAAmB;AAAEd,EAAAA;AAAF,CAAnB,EAAgC;AACrC,MAAI;AAAA,UACMQ,IADN,GACqBR,OADrB,CACMQ,IADN;AAAA,UACYJ,IADZ,GACqBJ,OADrB,CACYI,IADZ;AAAA,UAEMW,EAFN,GAEmBX,IAFnB,CAEMW,EAFN;AAAA,UAEUN,IAFV,GAEmBL,IAFnB,CAEUK,IAFV;AAGF,UAAMf,IAAI,CAACI,GAAG,CAACH,GAAL,EAAW,IAAGa,IAAK,IAAGO,EAAG,EAAzB,EAA4BN,IAA5B,CAAV;AAEAZ,IAAAA,KAAK,CAACc,OAAN,CAAc,mCAAd;AACD,GAND,CAME,OAAOC,GAAP,EAAY;AACZf,IAAAA,KAAK,CAACgB,KAAN,CAAY,4BAAZ;AACAZ,IAAAA,OAAO,CAACC,IAAR,CAAaC,GAAb,CAAiBH,OAAjB,EAFY,CAGZ;AACD;AACF;AAED,OAAO,UAAUgB,QAAV,CAAmB;AAAEhB,EAAAA;AAAF,CAAnB,EAAgC;AACrCC,EAAAA,OAAO,CAACC,IAAR,CAAaC,GAAb,CAAiBH,OAAjB;;AACA,MAAI;AAAA,UACMQ,IADN,GACqBR,OADrB,CACMQ,IADN;AAAA,UACYJ,IADZ,GACqBJ,OADrB,CACYI,IADZ;AAEF,UAAMV,IAAI,CAACI,GAAG,CAACmB,MAAL,EAAaT,IAAb,EAAmB;AAAEJ,MAAAA,IAAI,EAAE;AAAEW,QAAAA,EAAE,EAAEG,MAAM,CAACd,IAAD;AAAZ;AAAR,KAAnB,CAAV;AAEAP,IAAAA,KAAK,CAACc,OAAN,CAAc,iCAAd;AACD,GALD,CAKE,OAAOC,GAAP,EAAY;AACZf,IAAAA,KAAK,CAACgB,KAAN,CAAY,4BAAZ;AACD;AACF;AAED,eAAejB,GAAG,CAAC,CACjBH,UAAU,CAAC,QAAD,EAAWM,QAAX,CADO,EAEjBN,UAAU,CAAC,QAAD,EAAWqB,QAAX,CAFO,EAGjBrB,UAAU,CAAC,QAAD,EAAWuB,QAAX,CAHO,CAAD,CAAlB","sourcesContent":["import { takeLatest, call, put, all } from 'redux-saga/effects';\nimport { toast } from 'react-toastify';\nimport api from '~/services/api';\n\n// import { request } from './actions';\n\nexport function* toCreate({ payload }) {\n  console.tron.log(\n    payload.data,\n    typeof payload.data.student_id,\n    typeof payload.data.plan_id,\n    typeof payload.data.start_date\n  );\n  try {\n    const { page, rest } = payload.data;\n    console.tron.log(rest);\n    yield call(api.post, page, { rest });\n\n    toast.success('Aluno matriculado com sucesso!');\n  } catch (err) {\n    toast.error('Erro ao inserir dados!');\n    // yield put(failure(payload.page, 'CREATE', payload.data));\n  }\n}\n\nexport function* toUpdate({ payload }) {\n  try {\n    const { page, data } = payload;\n    const { id, rest } = data;\n    yield call(api.put, `/${page}/${id}`, rest);\n\n    toast.success('Matrícula atualizada com sucesso!');\n  } catch (err) {\n    toast.error('Erro ao editar matrcícula!');\n    console.tron.log(payload);\n    // yield put(failure(payload.page, 'UPDATE', payload.data));\n  }\n}\n\nexport function* toDelete({ payload }) {\n  console.tron.log(payload);\n  try {\n    const { page, data } = payload;\n    yield call(api.delete, page, { data: { id: String(data) } });\n\n    toast.success('Matrícula deletada com sucesso!');\n  } catch (err) {\n    toast.error('Erro ao deletar matrícula!');\n  }\n}\n\nexport default all([\n  takeLatest('CREATE', toCreate),\n  takeLatest('UPDATE', toUpdate),\n  takeLatest('DELETE', toDelete),\n]);\n"]},"metadata":{},"sourceType":"module"}